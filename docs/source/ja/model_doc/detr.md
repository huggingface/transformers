<!--Copyright 2021 The HuggingFace Team. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with
the License. You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on
an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.

âš ï¸ Note that this file is in Markdown but contain specific syntax for our doc-builder (similar to MDX) that may not be
rendered properly in your Markdown viewer.

-->

# DETR

## Overview

DETR ãƒ¢ãƒ‡ãƒ«ã¯ã€[Transformers ã‚’ä½¿ç”¨ã—ãŸã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¤œå‡º](https://arxiv.org/abs/2005.12872) ã§ææ¡ˆã•ã‚Œã¾ã—ãŸã€‚
Nicolas Carion, Francisco Massa, Gabriel Synnaeve, Nicolas Usunier, Alexander Kirillov and Sergey Zagoruyko ãƒ«ã‚¤ã‚³ã€‚ DETR
ç•³ã¿è¾¼ã¿ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ã¨ã€ãã®å¾Œã«ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã§ãã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼/ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼ Transformer ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚
ç‰©ä½“ã®æ¤œå‡ºã€‚ Faster-R-CNN ã‚„ Mask-R-CNN ãªã©ã®ãƒ¢ãƒ‡ãƒ«ã®è¤‡é›‘ã•ã®å¤šããŒå¤§å¹…ã«ç°¡ç´ åŒ–ã•ã‚Œã¾ã™ã€‚
é ˜åŸŸææ¡ˆã€éæœ€å¤§æŠ‘åˆ¶æ‰‹é †ã€ã‚¢ãƒ³ã‚«ãƒ¼ç”Ÿæˆãªã©ã§ã™ã€‚ã•ã‚‰ã«ã€DETR ã¯æ¬¡ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
ãƒ‡ã‚³ãƒ¼ãƒ€å‡ºåŠ›ã®ä¸Šã«ãƒã‚¹ã‚¯ ãƒ˜ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã€ãƒ‘ãƒãƒ—ãƒ†ã‚£ãƒƒã‚¯ ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«è‡ªç„¶ã«æ‹¡å¼µã•ã‚Œã¦ã„ã¾ã™ã€‚

è«–æ–‡ã®è¦ç´„ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚

*ç‰©ä½“æ¤œå‡ºã‚’ç›´æ¥é›†åˆäºˆæ¸¬å•é¡Œã¨ã—ã¦è¦‹ã‚‹æ–°ã—ã„æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ç§ãŸã¡ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€
æ¤œå‡ºãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ã‚ˆã‚Šã€éæœ€å¤§æŠ‘åˆ¶ãªã©ã®å¤šãã®æ‰‹ä½œæ¥­ã§è¨­è¨ˆã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¿…è¦æ€§ãŒåŠ¹æœçš„ã«æ’é™¤ã•ã‚Œã¾ã™ã€‚
ã‚¿ã‚¹ã‚¯ã«é–¢ã™ã‚‹äº‹å‰ã®çŸ¥è­˜ã‚’æ˜ç¤ºçš„ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ã¾ãŸã¯ã‚¢ãƒ³ã‚«ãƒ¼ã®ç”Ÿæˆã€‚ã®ä¸»ãªæˆåˆ†ã¯ã€
DEtection TRansformer ã¾ãŸã¯ DETR ã¨å‘¼ã°ã‚Œã‚‹æ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€ã‚»ãƒƒãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«æå¤±ã§ã‚ã‚Šã€
äºŒéƒ¨ãƒãƒƒãƒãƒ³ã‚°ã€ãŠã‚ˆã³ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒ¼ ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼/ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€‚å­¦ç¿’ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã‚¯ã‚¨ãƒªã®å›ºå®šã•ã‚ŒãŸå°ã•ãªã‚»ãƒƒãƒˆãŒä¸ãˆã‚‰ã‚Œã‚‹ã¨ã€
DETR ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã‚°ãƒ­ãƒ¼ãƒãƒ« ã‚¤ãƒ¡ãƒ¼ã‚¸ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®é–¢ä¿‚ã«ã¤ã„ã¦æ¨è«–ã—ã€æœ€çµ‚ã‚»ãƒƒãƒˆã‚’ç›´æ¥å‡ºåŠ›ã—ã¾ã™ã€‚
ä¸¦è¡Œã—ã¦äºˆæƒ³ã‚‚ã€‚æ–°ã—ã„ãƒ¢ãƒ‡ãƒ«ã¯æ¦‚å¿µçš„ã«ã‚·ãƒ³ãƒ—ãƒ«ã§ã‚ã‚Šã€å¤šãã®ãƒ¢ãƒ‡ãƒ«ã¨ã¯ç•°ãªã‚Šã€ç‰¹æ®Šãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å¿…è¦ã¨ã—ã¾ã›ã‚“ã€‚
ä»–ã®æœ€æ–°ã®æ¤œå‡ºå™¨ã€‚ DETR ã¯ã€ç¢ºç«‹ã•ã‚ŒãŸã€ãŠã‚ˆã³åŒç­‰ã®ç²¾åº¦ã¨å®Ÿè¡Œæ™‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å®Ÿè¨¼ã—ã¾ã™ã€‚
å›°é›£ãª COCO ç‰©ä½“æ¤œå‡ºãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åŸºã¥ãã€é«˜åº¦ã«æœ€é©åŒ–ã•ã‚ŒãŸ Faster RCNN ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã€‚ã•ã‚‰ã«ã€DETR ã¯ç°¡å˜ã«å®Ÿè¡Œã§ãã¾ã™ã€‚
çµ±ä¸€ã•ã‚ŒãŸæ–¹æ³•ã§ãƒ‘ãƒãƒ—ãƒ†ã‚£ãƒƒã‚¯ ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ä¸€èˆ¬åŒ–ã•ã‚Œã¾ã—ãŸã€‚ç«¶åˆä»–ç¤¾ã‚’å¤§å¹…ã«ä¸Šå›ã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç¤ºã—ã¦ã„ã¾ã™
ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³*

ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€[nielsr](https://huggingface.co/nielsr) ã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã¾ã—ãŸã€‚å…ƒã®ã‚³ãƒ¼ãƒ‰ã¯ [ã“ã¡ã‚‰](https://github.com/facebookresearch/detr) ã«ã‚ã‚Šã¾ã™ã€‚

## How DETR works

[`~transformers.DetrForObjectDetection`] ãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’èª¬æ˜ã™ã‚‹ TLDR ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚

ã¾ãšã€äº‹å‰ã«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã•ã‚ŒãŸç•³ã¿è¾¼ã¿ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ã‚’é€šã˜ã¦ç”»åƒãŒé€ä¿¡ã•ã‚Œã¾ã™ (è«–æ–‡ã§ã¯ã€è‘—è€…ã‚‰ã¯æ¬¡ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¦ã„ã¾ã™)ã€‚
ResNet-50/ResNet-101)ã€‚ãƒãƒƒãƒ ãƒ‡ã‚£ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚‚è¿½åŠ ã™ã‚‹ã¨ä»®å®šã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ã¸ã®å…¥åŠ›ãŒ
ç”»åƒã« 3 ã¤ã®ã‚«ãƒ©ãƒ¼ ãƒãƒ£ãƒãƒ« (RGB) ãŒã‚ã‚‹ã¨ä»®å®šã—ãŸå ´åˆã®ã€å½¢çŠ¶ `(batch_size, 3, height, width)` ã®ãƒ†ãƒ³ã‚½ãƒ«ã€‚ CNNã®ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³
é€šå¸¸ã¯ `(batch_size, 2048, height/32, width/32)` ã®å½¢çŠ¶ã®ã€æ–°ã—ã„ä½è§£åƒåº¦ã®ç‰¹å¾´ãƒãƒƒãƒ—ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚ã“ã‚Œã¯
æ¬¡ã«ã€DETR ã® Transformer ã®éš ã‚Œæ¬¡å…ƒ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ `256`) ã«ä¸€è‡´ã™ã‚‹ã‚ˆã†ã«æŠ•å½±ã•ã‚Œã¾ã™ã€‚
`nn.Conv2D` ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚ã“ã‚Œã§ã€å½¢çŠ¶ `(batch_size, 256, height/32, width/32)` ã®ãƒ†ãƒ³ã‚½ãƒ«ãŒå®Œæˆã—ã¾ã—ãŸã€‚
ç‰¹å¾´ãƒãƒƒãƒ—ã¯å¹³å¦åŒ–ãŠã‚ˆã³è»¢ç½®ã•ã‚Œã€å½¢çŠ¶ `(batch_size, seq_len, d_model)` ã®ãƒ†ãƒ³ã‚½ãƒ«ã‚’å–å¾—ã—ã¾ã™ =
`(batch_size, width/32*height/32, 256)`ã€‚ã—ãŸãŒã£ã¦ã€NLP ãƒ¢ãƒ‡ãƒ«ã¨ã®é•ã„ã¯ã€ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã®é•·ã•ãŒå®Ÿéš›ã«ã¯
é€šå¸¸ã‚ˆã‚Šã‚‚é•·ããªã‚Šã¾ã™ãŒã€ã€Œd_modelã€ã¯å°ã•ããªã‚Šã¾ã™ (NLP ã§ã¯é€šå¸¸ 768 ä»¥ä¸Šã§ã™)ã€‚

æ¬¡ã«ã€ã“ã‚ŒãŒã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã‚’ä»‹ã—ã¦é€ä¿¡ã•ã‚Œã€åŒã˜å½¢çŠ¶ã® `encoder_hidden_â€‹â€‹states` ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ (æ¬¡ã®ã‚ˆã†ã«è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™)ã€‚
ã“ã‚Œã‚‰ã¯ç”»åƒã®ç‰¹å¾´ã¨ã—ã¦ï¼‰ã€‚æ¬¡ã«ã€ã„ã‚ã‚†ã‚‹ **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã‚¯ã‚¨ãƒª**ãŒãƒ‡ã‚³ãƒ¼ãƒ€ã‚’é€šã˜ã¦é€ä¿¡ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯å½¢çŠ¶ã®ãƒ†ãƒ³ã‚½ãƒ«ã§ã™
`(batch_size, num_queries, d_model)`ã€‚é€šå¸¸ã€`num_queries` ã¯ 100 ã«è¨­å®šã•ã‚Œã€ã‚¼ãƒ­ã§åˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã‚‰ã®å…¥åŠ›åŸ‹ã‚è¾¼ã¿ã¯å­¦ç¿’ã•ã‚ŒãŸä½ç½®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã‚ã‚Šã€ä½œæˆè€…ã¯ã“ã‚Œã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã‚¯ã‚¨ãƒªã¨å‘¼ã³ã€åŒæ§˜ã«
ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã§ã¯ã€ãã‚Œã‚‰ã¯å„ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³å±¤ã®å…¥åŠ›ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚å„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã‚¯ã‚¨ãƒªã¯ç‰¹å®šã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¤œç´¢ã—ã¾ã™ã€‚
ç”»åƒã§ã¯ã€‚ãƒ‡ã‚³ãƒ¼ãƒ€ã¯ã€è¤‡æ•°ã®ã‚»ãƒ«ãƒ• ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ ãƒ¬ã‚¤ãƒ¤ã¨ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ ãƒ‡ã‚³ãƒ¼ãƒ€ ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ ãƒ¬ã‚¤ãƒ¤ã‚’é€šã˜ã¦ã“ã‚Œã‚‰ã®åŸ‹ã‚è¾¼ã¿ã‚’æ›´æ–°ã—ã¾ã™ã€‚
åŒã˜å½¢çŠ¶ã® `decoder_hidden_â€‹â€‹states` ã‚’å‡ºåŠ›ã—ã¾ã™: `(batch_size, num_queries, d_model)`ã€‚æ¬¡ã«é ­ãŒï¼’ã¤
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¤œå‡ºã®ãŸã‚ã«ä¸Šéƒ¨ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚å„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã‚¯ã‚¨ãƒªã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® 1 ã¤ã«åˆ†é¡ã™ã‚‹ãŸã‚ã®ç·šå½¢ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€ã¾ãŸã¯ã€Œã„ã„ãˆã€
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã€ãŠã‚ˆã³å„ã‚¯ã‚¨ãƒªã®å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ã‚’äºˆæ¸¬ã™ã‚‹ MLPã€‚

ãƒ¢ãƒ‡ãƒ«ã¯ **2 éƒ¨ãƒãƒƒãƒãƒ³ã‚°æå¤±**ã‚’ä½¿ç”¨ã—ã¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚ã¤ã¾ã‚Šã€å®Ÿéš›ã«è¡Œã†ã“ã¨ã¯ã€äºˆæ¸¬ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã‚’æ¯”è¼ƒã™ã‚‹ã“ã¨ã§ã™ +
ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ ãƒˆã‚¥ãƒ«ãƒ¼ã‚¹ ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã™ã‚‹ N = 100 å€‹ã®å„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã‚¯ã‚¨ãƒªã®å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ (åŒã˜é•·ã• N ã¾ã§ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°)
(ã—ãŸãŒã£ã¦ã€ç”»åƒã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ 4 ã¤ã—ã‹å«ã¾ã‚Œã¦ã„ãªã„å ´åˆã€96 å€‹ã®æ³¨é‡ˆã«ã¯ã‚¯ãƒ©ã‚¹ã¨ã—ã¦ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã—ã€ã€ãŠã‚ˆã³ã‚¯ãƒ©ã‚¹ã¨ã—ã¦ã€Œå¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ãªã—ã€ãŒå«ã¾ã‚Œã‚‹ã ã‘ã«ãªã‚Šã¾ã™ã€‚
å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹)ã€‚ [Hungarian matching algorithm](https://en.wikipedia.org/wiki/Hungarian_algorithm) ã¯ã€æ¤œç´¢ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
N å€‹ã®ã‚¯ã‚¨ãƒªã®ãã‚Œãã‚Œã‹ã‚‰ N å€‹ã®æ³¨é‡ˆã®ãã‚Œãã‚Œã¸ã®æœ€é©ãª 1 å¯¾ 1 ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã€‚æ¬¡ã«ã€æ¨™æº–ã‚¯ãƒ­ã‚¹ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ (
ã‚¯ãƒ©ã‚¹)ã€ãŠã‚ˆã³ L1 ã¨ [generalized IoU loss](https://giou.stanford.edu/) ã®ç·šå½¢çµåˆ (
å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹) ã¯ã€ãƒ¢ãƒ‡ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æœ€é©åŒ–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

DETR ã¯ã€ãƒ‘ãƒãƒ—ãƒ†ã‚£ãƒƒã‚¯ ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’çµ±åˆã™ã‚‹) ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«è‡ªç„¶ã«æ‹¡å¼µã§ãã¾ã™ã€‚
ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã€‚ [`~transformers.DetrForSegmentation`] ã¯ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ ãƒã‚¹ã‚¯ ãƒ˜ãƒƒãƒ‰ã‚’ä¸Šã«è¿½åŠ ã—ã¾ã™
[`~transformers.DetrForObjectDetection`]ã€‚ãƒã‚¹ã‚¯ ãƒ˜ãƒƒãƒ‰ã¯ã€å…±åŒã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ã“ã¨ã‚‚ã€2 æ®µéšã®ãƒ—ãƒ­ã‚»ã‚¹ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
ã“ã“ã§ã€æœ€åˆã« [`~transformers.DetrForObjectDetection`] ãƒ¢ãƒ‡ãƒ«ã‚’ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã—ã¦ã€ä¸¡æ–¹ã®å‘¨å›²ã®å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ã‚’æ¤œå‡ºã—ã¾ã™ã€‚
ã€Œã‚‚ã®ã€ï¼ˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰ã¨ã€Œã‚‚ã®ã€ï¼ˆæœ¨ã€é“è·¯ã€ç©ºãªã©ã®èƒŒæ™¯ã®ã‚‚ã®ï¼‰ã‚’ã™ã¹ã¦å‡çµã—ã€ã™ã¹ã¦ã®é‡ã¿ã‚’ãƒ•ãƒªãƒ¼ã‚ºã—ã¦ã®ã¿ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã—ã¾ã™ã€‚
25 ã‚¨ãƒãƒƒã‚¯ã®ãƒã‚¹ã‚¯ãƒ˜ãƒƒãƒ‰ã€‚å®Ÿé¨“çš„ã«ã¯ã€ã“ã‚Œã‚‰ 2 ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯åŒæ§˜ã®çµæœã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚ãƒœãƒƒã‚¯ã‚¹ã®äºˆæ¸¬ã¯
ãƒãƒ³ã‚¬ãƒªãƒ¼èªã®ãƒãƒƒãƒãƒ³ã‚°ã¯ãƒœãƒƒã‚¯ã‚¹é–“ã®è·é›¢ã‚’ä½¿ç”¨ã—ã¦è¨ˆç®—ã•ã‚Œã‚‹ãŸã‚ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ã¯ã“ã‚ŒãŒå¿…è¦ã§ã™ã€‚

## Usage tips

- DETR ã¯ã€ã„ã‚ã‚†ã‚‹ **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã‚¯ã‚¨ãƒª** ã‚’ä½¿ç”¨ã—ã¦ã€ç”»åƒå†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¤œå‡ºã—ã¾ã™ã€‚ã‚¯ã‚¨ãƒªã®æ•°ã«ã‚ˆã£ã¦æœ€å¤§å€¤ãŒæ±ºã¾ã‚Šã¾ã™
  å˜ä¸€ã®ç”»åƒå†…ã§æ¤œå‡ºã§ãã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ•°ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ 100 ã«è¨­å®šã•ã‚Œã¾ã™ (ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å‚ç…§)
  [`~transformers.DetrConfig`] ã® `num_queries`)ã€‚ã‚ã‚‹ç¨‹åº¦ã®ä½™è£•ãŒã‚ã‚‹ã®ã¯è‰¯ã„ã“ã¨ã§ã™ (COCO ã§ã¯ã€
  è‘—è€…ã¯ 100 ã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã€COCO ã‚¤ãƒ¡ãƒ¼ã‚¸å†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æœ€å¤§æ•°ã¯ç´„ 70 ã§ã™)ã€‚
- DETR ã®ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼ã¯ã€ã‚¯ã‚¨ãƒªã®åŸ‹ã‚è¾¼ã¿ã‚’ä¸¦è¡Œã—ã¦æ›´æ–°ã—ã¾ã™ã€‚ã“ã‚Œã¯ GPT-2 ã®ã‚ˆã†ãªè¨€èªãƒ¢ãƒ‡ãƒ«ã¨ã¯ç•°ãªã‚Šã¾ã™ã€‚
  ä¸¦åˆ—ã§ã¯ãªãè‡ªå·±å›å¸°ãƒ‡ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€å› æœçš„æ³¨æ„ãƒã‚¹ã‚¯ã¯ä½¿ç”¨ã•ã‚Œã¾ã›ã‚“ã€‚
- DETR ã¯ã€æŠ•å½±å‰ã«å„ã‚»ãƒ«ãƒ•ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³å±¤ã¨ã‚¯ãƒ­ã‚¹ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³å±¤ã®éš ã‚ŒçŠ¶æ…‹ã«ä½ç½®åŸ‹ã‚è¾¼ã¿ã‚’è¿½åŠ ã—ã¾ã™ã€‚
  ã‚¯ã‚¨ãƒªã¨ã‚­ãƒ¼ã«ã€‚ç”»åƒã®ä½ç½®åŸ‹ã‚è¾¼ã¿ã«ã¤ã„ã¦ã¯ã€å›ºå®šæ­£å¼¦æ³¢ã¾ãŸã¯å­¦ç¿’æ¸ˆã¿ã®ã©ã¡ã‚‰ã‹ã‚’é¸æŠã§ãã¾ã™ã€‚
  çµ¶å¯¾ä½ç½®åŸ‹ã‚è¾¼ã¿ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `position_embedding_type` ã¯
  [`~transformers.DetrConfig`] ã¯ `"sine"` ã«è¨­å®šã•ã‚Œã¾ã™ã€‚
- DETR ã®ä½œæˆè€…ã¯ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ä¸­ã«ã€ç‰¹ã«ãƒ‡ã‚³ãƒ¼ãƒ€ã§è£œåŠ©æå¤±ã‚’ä½¿ç”¨ã™ã‚‹ã¨å½¹ç«‹ã¤ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚
  ãƒ¢ãƒ‡ãƒ«ã¯å„ã‚¯ãƒ©ã‚¹ã®æ­£ã—ã„æ•°ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‡ºåŠ›ã—ã¾ã™ã€‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `auxiliary_loss` ã‚’è¨­å®šã™ã‚‹ã¨ã€
  [`~transformers.DetrConfig`] ã‚’`True`ã«è¨­å®šã—ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ« ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ãƒãƒ³ã‚¬ãƒªãƒ¼æå¤±ã‚’äºˆæ¸¬ã—ã¾ã™
  ã¯å„ãƒ‡ã‚³ãƒ¼ãƒ€å±¤ã®å¾Œã«è¿½åŠ ã•ã‚Œã¾ã™ (FFN ãŒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…±æœ‰ã™ã‚‹)ã€‚
- è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã«ã‚ãŸã‚‹åˆ†æ•£ç’°å¢ƒã§ãƒ¢ãƒ‡ãƒ«ã‚’ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹å ´åˆã¯ã€
  _modeling_detr.py_ ã® _DetrLoss_ ã‚¯ãƒ©ã‚¹ã® _num_boxes_ å¤‰æ•°ã€‚è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹å ´åˆã€ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
  å…ƒã®å®Ÿè£…ã§è¦‹ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã€ã™ã¹ã¦ã®ãƒãƒ¼ãƒ‰ã«ã‚ãŸã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ ãƒœãƒƒã‚¯ã‚¹ã®å¹³å‡æ•°ã«è¨­å®šã•ã‚Œã¾ã™ [ã“ã¡ã‚‰](https://github.com/facebookresearch/detr/blob/a54b77800eb8e64e3ad0d8237789fcbf2f8350c5/models/detr.py#L227-L232) ã€‚
- [`~transformers.DetrForObjectDetection`] ãŠã‚ˆã³ [`~transformers.DetrForSegmentation`] ã¯æ¬¡ã®ã‚ˆã†ã«åˆæœŸåŒ–ã§ãã¾ã™ã€‚
  [timm ãƒ©ã‚¤ãƒ–ãƒ©ãƒª](https://github.com/rwightman/pytorch-image-models) ã§åˆ©ç”¨å¯èƒ½ãªç•³ã¿è¾¼ã¿ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ã€‚
  ãŸã¨ãˆã°ã€MobileNet ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ãŸåˆæœŸåŒ–ã¯ã€æ¬¡ã® `backbone` å±æ€§ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§å®Ÿè¡Œã§ãã¾ã™ã€‚
  [`~transformers.DetrConfig`] ã‚’ `"tf_mobilenetv3_small_075"` ã«è¨­å®šã—ã€ãã‚Œã‚’ä½¿ç”¨ã—ã¦ãƒ¢ãƒ‡ãƒ«ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
  æ§‹æˆã€‚
- DETR ã¯ã€æœ€çŸ­è¾ºãŒä¸€å®šã®ãƒ”ã‚¯ã‚»ãƒ«æ•°ä»¥ä¸Šã«ãªã‚Šã€æœ€é•·è¾ºãŒä¸€å®šé‡ä»¥ä¸Šã«ãªã‚‹ã‚ˆã†ã«å…¥åŠ›ç”»åƒã®ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã—ã¾ã™ã€‚
  æœ€å¤§ 1333 ãƒ”ã‚¯ã‚»ãƒ«ã€‚ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚ã«ã€æœ€çŸ­è¾ºãŒãƒ©ãƒ³ãƒ€ãƒ ã« ã«è¨­å®šã•ã‚Œã‚‹ã‚ˆã†ã«ã‚¹ã‚±ãƒ¼ãƒ«æ‹¡å¼µãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
  æœ€å° 480ã€æœ€å¤§ 800 ãƒ”ã‚¯ã‚»ãƒ«ã€‚æ¨è«–æ™‚ã«ã¯ã€æœ€çŸ­è¾ºãŒ 800 ã«è¨­å®šã•ã‚Œã¾ã™ã€‚

ä½¿ç”¨ã§ãã¾ã™
  [`~transformers.DetrImageProcessor`] ç”¨ã®ç”»åƒ (ãŠã‚ˆã³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã® COCO å½¢å¼ã®æ³¨é‡ˆ) ã‚’æº–å‚™ã—ã¾ã™ã€‚
  ãƒ¢ãƒ‡ãƒ«ã€‚ã“ã®ã‚µã‚¤ã‚ºå¤‰æ›´ã«ã‚ˆã‚Šã€ãƒãƒƒãƒå†…ã®ç”»åƒã®ã‚µã‚¤ã‚ºãŒç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ DETR ã¯ã€ç”»åƒã‚’æœ€å¤§ã¾ã§ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ã“ã®å•é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
  ã©ã®ãƒ”ã‚¯ã‚»ãƒ«ãŒå®Ÿæ•°ã§ã©ã®ãƒ”ã‚¯ã‚»ãƒ«ãŒãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã§ã‚ã‚‹ã‹ã‚’ç¤ºã™ãƒ”ã‚¯ã‚»ãƒ« ãƒã‚¹ã‚¯ã‚’ä½œæˆã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒãƒƒãƒå†…ã®æœ€å¤§ã‚µã‚¤ã‚ºã‚’æ±ºå®šã—ã¾ã™ã€‚
  ã‚ã‚‹ã„ã¯ã€ç”»åƒã‚’ãƒãƒƒãƒå‡¦ç†ã™ã‚‹ãŸã‚ã«ã‚«ã‚¹ã‚¿ãƒ ã® `collatâ€‹â€‹e_fn` ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
  [`~transformers.DetrImageProcessor.pad_and_create_pixel_mask`]ã€‚
- ç”»åƒã®ã‚µã‚¤ã‚ºã«ã‚ˆã£ã¦ä½¿ç”¨ã•ã‚Œã‚‹ãƒ¡ãƒ¢ãƒªã®é‡ãŒæ±ºã¾ã‚Šã€ã—ãŸãŒã£ã¦ã€Œbatch_sizeã€ã‚‚æ±ºã¾ã‚Šã¾ã™ã€‚
  GPU ã‚ãŸã‚Š 2 ã®ãƒãƒƒãƒ ã‚µã‚¤ã‚ºã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€[ã“ã® Github ã‚¹ãƒ¬ãƒƒãƒ‰](https://github.com/facebookresearch/detr/issues/150) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

DETR ãƒ¢ãƒ‡ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹ã«ã¯ 3 ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ (å¥½ã¿ã«å¿œã˜ã¦)ã€‚

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 1: ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã®äº‹å‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã•ã‚ŒãŸé‡ã¿ã‚’ä½¿ç”¨ã—ã¦ DETR ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹

```py
>>> from transformers import DetrForObjectDetection

>>> model = DetrForObjectDetection.from_pretrained("facebook/detr-resnet-50")
```

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 2: Transformer ã«ã¤ã„ã¦ã¯ãƒ©ãƒ³ãƒ€ãƒ ã«åˆæœŸåŒ–ã•ã‚ŒãŸé‡ã¿ã‚’ä½¿ç”¨ã—ã¦ DETR ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¾ã™ãŒã€ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ã«ã¤ã„ã¦ã¯äº‹å‰ã«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã•ã‚ŒãŸé‡ã¿ã‚’ä½¿ç”¨ã—ã¾ã™

```py
>>> from transformers import DetrConfig, DetrForObjectDetection

>>> config = DetrConfig()
>>> model = DetrForObjectDetection(config)
```

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 3: ãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ + ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒ¼ã®ãƒ©ãƒ³ãƒ€ãƒ ã«åˆæœŸåŒ–ã•ã‚ŒãŸé‡ã¿ã‚’ä½¿ç”¨ã—ã¦ DETR ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¾ã™ã€‚

```py
>>> config = DetrConfig(use_pretrained_backbone=False)
>>> model = DetrForObjectDetection(config)
```

| Task | Object detection | Instance segmentation | Panoptic segmentation |
|------|------------------|-----------------------|-----------------------|
| **Description** |ç”»åƒå†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‘¨å›²ã®å¢ƒç•Œãƒœãƒƒã‚¯ã‚¹ã¨ã‚¯ãƒ©ã‚¹ ãƒ©ãƒ™ãƒ«ã‚’äºˆæ¸¬ã™ã‚‹ | ç”»åƒå†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (ã¤ã¾ã‚Šã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹) ã®å‘¨å›²ã®ãƒã‚¹ã‚¯ã‚’äºˆæ¸¬ã™ã‚‹ | ç”»åƒå†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹) ã¨ã€Œã‚‚ã®ã€ (æœ¨ã‚„é“è·¯ãªã©ã®èƒŒæ™¯) ã®ä¸¡æ–¹ã®å‘¨å›²ã®ãƒã‚¹ã‚¯ã‚’äºˆæ¸¬ã—ã¾ã™ |
| **Model** | [`~transformers.DetrForObjectDetection`] | [`~transformers.DetrForSegmentation`] | [`~transformers.DetrForSegmentation`] |
| **Example dataset** | COCO detection | COCO detection, COCO panoptic | COCO panoptic  |                                                                        |
| **Format of annotations to provide to**  [`~transformers.DetrImageProcessor`] | {'image_id': `int`, 'annotations': `List[Dict]`} each Dict being a COCO object annotation  | {'image_id': `int`, 'annotations': `List[Dict]`}  (in case of COCO detection) or {'file_name': `str`, 'image_id': `int`, 'segments_info': `List[Dict]`} (in case of COCO panoptic) | {'file_name': `str`, 'image_id': `int`, 'segments_info': `List[Dict]`} and masks_path (path to directory containing PNG files of the masks) |
| **Postprocessing** (i.e. converting the output of the model to Pascal VOC format) | [`~transformers.DetrImageProcessor.post_process`] | [`~transformers.DetrImageProcessor.post_process_segmentation`] | [`~transformers.DetrImageProcessor.post_process_segmentation`], [`~transformers.DetrImageProcessor.post_process_panoptic`] |
| **evaluators** | `CocoEvaluator` with `iou_types="bbox"` | `CocoEvaluator` with `iou_types="bbox"` or `"segm"` | `CocoEvaluator` with `iou_tupes="bbox"` or `"segm"`, `PanopticEvaluator` |

ã¤ã¾ã‚Šã€COCO æ¤œå‡ºã¾ãŸã¯ COCO ãƒ‘ãƒãƒ—ãƒ†ã‚£ãƒƒã‚¯å½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ã—ã¦ã‹ã‚‰ã€æ¬¡ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
[`~transformers.DetrImageProcessor`] `pixel_values`ã€`pixel_mask`ã€ãŠã‚ˆã³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚
ã€Œãƒ©ãƒ™ãƒ«ã€ã€‚ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ãƒ¢ãƒ‡ãƒ«ã‚’ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° (ã¾ãŸã¯å¾®èª¿æ•´) ã§ãã¾ã™ã€‚è©•ä¾¡ã™ã‚‹ã«ã¯ã€ã¾ãšã€
[`~transformers.DetrImageProcessor`] ã®å¾Œå‡¦ç†ãƒ¡ã‚½ãƒƒãƒ‰ã® 1 ã¤ã‚’ä½¿ç”¨ã—ãŸãƒ¢ãƒ‡ãƒ«ã®å‡ºåŠ›ã€‚ã“ã‚Œã‚‰ã¯ã§ãã¾ã™
`CocoEvaluator` ã¾ãŸã¯ `PanopticEvaluator` ã®ã„ãšã‚Œã‹ã«æä¾›ã•ã‚Œã€æ¬¡ã®ã‚ˆã†ãªãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¨ˆç®—ã§ãã¾ã™ã€‚
å¹³å‡å¹³å‡ç²¾åº¦ (mAP) ã¨ãƒ‘ãƒãƒ©ãƒå“è³ª (PQ)ã€‚å¾Œè€…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ [å…ƒã®ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/facebookresearch/detr) ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚è©•ä¾¡ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€[ã‚µãƒ³ãƒ—ãƒ« ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯](https://github.com/NielsRogge/Transformers-Tutorials/tree/master/DETR) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## Resources

DETR ã®ä½¿ç”¨ã‚’é–‹å§‹ã™ã‚‹ã®ã«å½¹ç«‹ã¤å…¬å¼ Hugging Face ãŠã‚ˆã³ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ (ğŸŒ ã§ç¤ºã•ã‚Œã¦ã„ã‚‹) ãƒªã‚½ãƒ¼ã‚¹ã®ãƒªã‚¹ãƒˆã€‚

<PipelineTag pipeline="object-detection"/>

- ã‚«ã‚¹ã‚¿ãƒ  ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã® [`DetrForObjectDetection`] ã¨ [`DetrForSegmentation`] ã®å¾®èª¿æ•´ã‚’èª¬æ˜ã™ã‚‹ã™ã¹ã¦ã®ã‚µãƒ³ãƒ—ãƒ« ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã¯ã€[ã“ã¡ã‚‰](https://github.com/NielsRogge/Transformers-Tutorials/tree/master/DETR) ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ ã€‚
- å‚ç…§: [ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¤œå‡ºã‚¿ã‚¹ã‚¯ ã‚¬ã‚¤ãƒ‰](../tasks/object_detection)

ã“ã“ã«å«ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®é€ä¿¡ã«èˆˆå‘³ãŒã‚ã‚‹å ´åˆã¯ã€ãŠæ°—è»½ã«ãƒ—ãƒ« ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é–‹ã„ã¦ãã ã•ã„ã€‚å¯©æŸ»ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚ãƒªã‚½ãƒ¼ã‚¹ã¯ã€æ—¢å­˜ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’è¤‡è£½ã™ã‚‹ã®ã§ã¯ãªãã€ä½•ã‹æ–°ã—ã„ã‚‚ã®ã‚’ç¤ºã™ã“ã¨ãŒç†æƒ³çš„ã§ã™ã€‚

## DetrConfig

[[autodoc]] DetrConfig

## DetrImageProcessor

[[autodoc]] DetrImageProcessor
    - preprocess
    - post_process_object_detection
    - post_process_semantic_segmentation
    - post_process_instance_segmentation
    - post_process_panoptic_segmentation

## DetrFeatureExtractor

[[autodoc]] DetrFeatureExtractor
    - __call__
    - post_process_object_detection
    - post_process_semantic_segmentation
    - post_process_instance_segmentation
    - post_process_panoptic_segmentation

## DETR specific outputs

[[autodoc]] models.detr.modeling_detr.DetrModelOutput

[[autodoc]] models.detr.modeling_detr.DetrObjectDetectionOutput

[[autodoc]] models.detr.modeling_detr.DetrSegmentationOutput

## DetrModel

[[autodoc]] DetrModel
    - forward

## DetrForObjectDetection

[[autodoc]] DetrForObjectDetection
    - forward

## DetrForSegmentation

[[autodoc]] DetrForSegmentation
    - forward
