# DETR

## ูุธุฑุฉ ุนุงูุฉ

ุงูุชูุฑุญ ูููุฐุฌ DETR ูู ูุฑูุฉ "End-to-End Object Detection with Transformers" ุจูุงุณุทุฉ Nicolas Carion ูุขุฎุฑูู. ูุชููู ูููุฐุฌ DETR ูู ุดุจูุฉ ุนุตุจูุฉ ุชุนุงูุจูุฉ ุชูููุง ูุญูู ุชุดููุฑ ููู ุชุดููุฑ ูููู ุชุฏุฑูุจููุง ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉ ูููุดู ุนู ุงูุฃุดูุงุก. ุฅูู ูุจุณุท ูุซูุฑูุง ูู ุชุนููุฏุงุช ุงูููุงุฐุฌ ูุซู Faster-R-CNN ูMask-R-CNNุ ูุงูุชู ุชุณุชุฎุฏู ุฃุดูุงุก ูุซู ุงูุชุฑุงุญุงุช ุงูููุงุทูุ ูุฅุฌุฑุงุกุงุช ุงูููุน ุบูุฑ ุงููุตููุ ูุชูููุฏ ุงููุฑุงุณู. ุนูุงูุฉ ุนูู ุฐููุ ูููู ุฃูุถูุง ุชูุณูุน ูููุฐุฌ DETR ุจุดูู ุทุจูุนู ูุฃุฏุงุก ุงูุชุฌุฒุฆุฉ ุงูุดุงููุฉุ ูุฐูู ุจุจุณุงุทุฉ ุนู ุทุฑูู ุฅุถุงูุฉ ุฑุฃุณ ููุงุน ุฃุนูู ูุฎุฑุฌุงุช ูู ุงูุชุดููุฑ.

ููุชุทู ูู ุงููุฑูุฉ ุงูุจุญุซูุฉ ุนูู ุงููุญู ุงูุชุงูู:

> "ููุฏู ุทุฑููุฉ ุฌุฏูุฏุฉ ุชูุธุฑ ุฅูู ุงููุดู ุนู ุงูุฃุดูุงุก ููุดููุฉ ุชูุจุค ูุฌููุนุฉ ูุจุงุดุฑุฉ. ูุจุณุท ููุฌูุง ุฎุท ุฃูุงุจูุจ ุงููุดูุ ููุง ูุฒูู ูุนูููุง ุงูุญุงุฌุฉ ุฅูู ุงูุนุฏูุฏ ูู ุงูููููุงุช ุงููุตููุฉ ูุฏูููุง ูุซู ุฅุฌุฑุงุกุงุช ุงูููุน ุบูุฑ ุงููุตูู ุฃู ุชูููุฏ ุงููุฑุณุงุฉ ุงูุชู ุชุดูุฑ ุตุฑุงุญุฉ ูุนุฑูุชูุง ุงููุณุจูุฉ ุจุงููููุฉ. ุงูููููุงุช ุงูุฑุฆูุณูุฉ ููุฅุทุงุฑ ุงูุฌุฏูุฏุ ุงููุณูู ูุญูู ุงููุดู ุฃู DETRุ ูู ุฎุณุงุฑุฉ ุนุงูููุฉ ูุงุฆูุฉ ุนูู ุงููุฌููุนุฉ ุชุฌุจุฑ ุงูุชูุจุคุงุช ุงููุฑูุฏุฉ ูู ุฎูุงู ุงููุทุงุจูุฉ ุงูุซูุงุฆูุฉุ ูุจููุฉ ูุญูู ุงูุชุฑููุฒ ููู ุงูุชุฑููุฒ. ุจุงููุธุฑ ุฅูู ูุฌููุนุฉ ุตุบูุฑุฉ ุซุงุจุชุฉ ูู ุงุณุชูุณุงุฑุงุช ุงููุงุฆู ุงูููุนููุ ููุฌุฑู DETR ุงุณุชุฏูุงููุง ุญูู ุนูุงูุงุช ุงูุฃุดูุงุก ูุณูุงู ุงูุตูุฑุฉ ุงูุนุงููู ูุฅุฎุฑุงุฌ ูุฌููุนุฉ ุงูุชูุจุคุงุช ุงูููุงุฆูุฉ ุจุงูุชูุงุฒู. ุงููููุฐุฌ ุงูุฌุฏูุฏ ูููููููุง ุจุณูุท ููุง ูุชุทูุจ ููุชุจุฉ ูุชุฎุตุตุฉุ ุนูู ุนูุณ ุงูุนุฏูุฏ ูู ุงููุงุดูุงุช ุงูุญุฏูุซุฉ ุงูุฃุฎุฑู. ููุธูุฑ DETR ุฏูุฉ ูุฃุฏุงุก ููุช ุงูุชุดุบูู ุนูู ูุฏู ุงููุณุงูุงุฉ ูุน ุฎุท ุงูุฃุณุงุณ Faster RCNN ุงูุฑุงุณุฎ ูุงููุญุณูู ุฌูุฏูุง ูู ูุฌููุนุฉ ุจูุงูุงุช COCO ุงูุตุนุจุฉ ูููุดู ุนู ุงูุฃุดูุงุก. ุนูุงูุฉ ุนูู ุฐููุ ูููู ุชุนููู DETR ุจุณูููุฉ ูุฅูุชุงุฌ ุงูุชุฌุฒุฆุฉ ุงูุดุงููุฉ ุจุทุฑููุฉ ููุญุฏุฉ. ููุธูุฑ ุฃูู ูุชููู ุจุดูู ูุจูุฑ ุนูู ุฎุทูุท ุงูุฃุณุงุณ ุงูุชูุงูุณูุฉ."

ุชูุช ุงููุณุงููุฉ ุจูุฐุง ุงููููุฐุฌ ูู ูุจู [nielsr](https://huggingface.co/nielsr). ูููู ุงูุนุซูุฑ ุนูู ุงูููุฏ ุงูุฃุตูู [ููุง](https://github.com/facebookresearch/detr).

## ููู ูุนูู DETR

ูููุง ููู ููุฎุต ููุถุญ ููููุฉ ุนูู [`~transformers.DetrForObjectDetection`].

ุฃููุงูุ ูุชู ุฅุฑุณุงู ุตูุฑุฉ ุนุจุฑ ุดุจูุฉ ุนุตุจูุฉ ุชุนุงูุจูุฉ ููุนููุฉ ูุณุจููุง (ูู ุงููุฑูุฉุ ูุณุชุฎุฏู ุงููุคูููู ResNet-50/ResNet-101). ูููุชุฑุถ ุฃููุง ุฃุถููุง ุฃูุถูุง ุจูุนุฏ ุงูุฏูุนุฉ. ููุฐุง ูุนูู ุฃู ุงููุฏุฎูุงุช ุฅูู ุงูุดุจูุฉ ุงูุนุตุจูุฉ ุงูุชุนุงูุจูุฉ ูู ูุตูููุฉ ุฐุงุช ุดูู `(batch_sizeุ 3ุ heightุ width)`ุ ูุน ุงูุชุฑุงุถ ุฃู ุงูุตูุฑุฉ ุชุญุชูู ุนูู 3 ูููุงุช ููููุฉ (RGB). ุชููู ุงูุดุจูุฉ ุงูุนุตุจูุฉ ุงูุชุนุงูุจูุฉ ุจุฅุฎุฑุงุฌ ุฎุฑูุทุฉ ููุฒุงุช ุฐุงุช ุฏูุฉ ุฃููุ ุนุงุฏุฉู ุฐุงุช ุดูู `(batch_sizeุ 2048ุ height/32ุ width/32)`. ูุชู ุจุนุฏ ุฐูู ุฅุณูุงุทูุง ููุทุงุจูุฉ ุงูุจุนุฏ ุงููุฎูู ููุญูู DETRุ ูุงูุฐู ูููู `256` ุจุดูู ุงูุชุฑุงุถูุ ุจุงุณุชุฎุฏุงู ุทุจูุฉ `nn.Conv2D`. ูุฐุงุ ูุฏููุง ุงูุขู ูุตูููุฉ ุฐุงุช ุดูู `(batch_sizeุ 256ุ height/32ุ width/32)`. ุจุนุฏ ุฐููุ ูุชู ุชุณุทูุญ ุฎุฑูุทุฉ ุงูููุฒุงุช ูุชุนุฏูููุง ููุญุตูู ุนูู ูุตูููุฉ ุฐุงุช ุดูู `(batch_sizeุ seq_lenุ d_model)` = `(batch_sizeุ width/32*height/32ุ 256)`. ูุฐุงุ ูุฅู ุฃุญุฏ ุงูุงุฎุชูุงูุงุช ูุน ููุงุฐุฌ ูุนุงูุฌุฉ ุงููุบุงุช ุงูุทุจูุนูุฉ ูู ุฃู ุทูู ุงูุชุณูุณู ุฃุทูู ูู ุงููุนุชุงุฏุ ูููู ูุน `d_model` ุฃุตุบุฑ (ูุงูุฐู ูููู ุนุงุฏุฉู 768 ุฃู ุฃุนูู ูู ููุงุฐุฌ ูุนุงูุฌุฉ ุงููุบุงุช ุงูุทุจูุนูุฉ).

ุจุนุฏ ุฐููุ ูุชู ุฅุฑุณุงู ูุฐุง ุฅูู ุงููุดูุฑุ ููุง ูุคุฏู ุฅูู ุฅุฎุฑุงุฌ `encoder_hidden_states` ุจููุณ ุงูุดูู (ูููู ุงุนุชุจุงุฑูุง ููุฒุงุช ุตูุฑุฉ). ุจุนุฏ ุฐููุ ูุชู ุฅุฑุณุงู ูุง ูุณูู ุจู **ุงุณุชุนูุงูุงุช ุงููุงุฆู** ุนุจุฑ ูู ุงูุชุดููุฑ. ูุฐู ูุตูููุฉ ุฐุงุช ุดูู `(batch_sizeุ num_queriesุ d_model)`ุ ูุน `num_queries` ูุชู ุชุนููููุง ุนุงุฏุฉู ุฅูู 100 ูุฅุนุฏุงุฏูุง ุฅูู ุงูุตูุฑ. ูุฐู ุงููุฏุฎูุงุช ูู ุชุฑููุฒุงุช ููุถุน ููุนููุฉ ูุดูุฑ ุฅูููุง ุงููุคูููู ุจุงุณุชุนูุงูุงุช ุงููุงุฆูุ ูุนูู ุบุฑุงุฑ ุงููุดูุฑุ ูุชู ุฅุถุงูุชูุง ุฅูู ุฅุฏุฎุงู ูู ุทุจูุฉ ุงูุชูุงู. ุณูุจุญุซ ูู ุงุณุชุนูุงู ูุงุฆู ุนู ูุงุฆู ูุนูู ูู ุงูุตูุฑุฉ. ูููู ูู ุงูุชุดููุฑ ุจุชุญุฏูุซ ูุฐู ุงูุชุฑููุฒุงุช ูู ุฎูุงู ุทุจูุงุช ุงูุชูุงู ุฐุงุชูุฉ ูุงูุชูุงู ุจุชุดููุฑ ููู ุชุดููุฑ ูุชุนุฏุฏุฉ ูุฅุฎุฑุงุฌ `decoder_hidden_states` ุจููุณ ุงูุดูู: `(batch_sizeุ num_queriesุ d_model)`. ุจุนุฏ ุฐููุ ูุชู ุฅุถุงูุฉ ุฑุฃุณูู ูุฃุนูู ูููุดู ุนู ุงูุฃุดูุงุก: ุทุจูุฉ ุฎุทูุฉ ูุชุตููู ูู ุงุณุชุนูุงู ูุงุฆู ุฅูู ุฃุญุฏ ุงูุฃุดูุงุก ุฃู "ูุง ุดูุก"ุ ูMLP ููุชูุจุค ุจุญุฏูุฏ ุงูุฅุญุฏุงุซูุงุช ููู ุงุณุชุนูุงู.

ูุชู ุชุฏุฑูุจ ุงููููุฐุฌ ุจุงุณุชุฎุฏุงู **ุฎุณุงุฑุฉ ุงููุทุงุจูุฉ ุงูุซูุงุฆูุฉ**: ูุฐุง ูุง ููุนูู ุจุงููุนู ูู ููุงุฑูุฉ ุงููุฆุงุช ุงููุชูุจุฃ ุจูุง + ุญุฏูุฏ ุงูุฅุญุฏุงุซูุงุช ููู ูู ุงุณุชุนูุงูุงุช N = 100 ูุน ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุงูุฃุฑุถูุฉ ุงูุญูููุฉุ ูุน ุชูุณูุน ูุทุงููุง ุฅูู ููุณ ุงูุทูู N (ูุฐุงุ ุฅุฐุง ูุงูุช ุงูุตูุฑุฉ ุชุญุชูู ุนูู 4 ุฃุดูุงุก ููุทุ ูุณุชุญุชูู 96 ุชุนููู ุชูุถูุญู ููุท ุนูู "ูุง ุดูุก" ููุฆุฉ ู"ูุง ุญุฏูุฏ ุฅุญุฏุงุซูุงุช" ูุญุฏูุฏ ุฅุญุฏุงุซูุงุช). ูุชู ุงุณุชุฎุฏุงู ุฎูุงุฑุฒููุฉ ุงููุทุงุจูุฉ ุงูููุบุงุฑูุฉ ููุนุซูุฑ ุนูู ุฎุฑูุทุฉ ูุงุญุฏุฉ ููุงุญุฏุฉ ูุซุงููุฉ ููู ูู ุงูุงุณุชุนูุงูุงุช N ูุงูุชุนูููุงุช N. ุจุนุฏ ุฐููุ ูุชู ุงุณุชุฎุฏุงู ุงูุงูุญุฏุงุฑ ุงูููุบุงุฑูุชูู (ููุทุจูุงุช) ููุฒูุฌ ุฎุทู ูู L1 ู [ุฎุณุงุฑุฉ IoU ุงูุนุงูุฉ](https://giou.stanford.edu/) (ูุญุฏูุฏ ุงูุฅุญุฏุงุซูุงุช) ูุชุญุณูู ูุนููุงุช ุงููููุฐุฌ.

ูููู ุชูุณูุน ูููุฐุฌ DETR ุจุดูู ุทุจูุนู ูุฃุฏุงุก ุงูุชุฌุฒุฆุฉ ุงูุดุงููุฉ (ุงูุชู ุชูุญุฏ ุงูุชุฌุฒุฆุฉ ุงูุฏูุงููุฉ ูุชุฌุฒุฆุฉ ุงููุซูู). ูุถูู [`~transformers.DetrForSegmentation`] ุฑุฃุณ ููุงุน ุฃุนูู [`~transformers.DetrForObjectDetection`]. ูููู ุชุฏุฑูุจ ุฑุฃุณ ุงูููุงุน ุฅูุง ุจุดูู ูุดุชุฑูุ ุฃู ูู ุนูููุฉ ูู ุฎุทูุชููุ ุญูุซ ูุชู ุฃููุงู ุชุฏุฑูุจ ูููุฐุฌ [`~transformers.DetrForObjectDetection`] ูููุดู ุนู ุญุฏูุฏ ุงูุฅุญุฏุงุซูุงุช ุญูู ูู ูู "ุงูุฃุดูุงุก" (ุงููุซููุงุช) ู"ุงูุฃุดูุงุก" (ุฃุดูุงุก ุงูุฎูููุฉ ูุซู ุงูุฃุดุฌุงุฑ ูุงูุทุฑู ูุงูุณูุงุก)ุ ุซู ูุชู ุชุฌููุฏ ุฌููุน ุงูุฃูุฒุงู ูุชุฏุฑูุจ ุฑุฃุณ ุงูููุงุน ููุท ููุฏุฉ 25 ุญูุจุฉ. ุชุฌุฑูุจูุงูุ ุชุนุทู ูุงุชุงู ุงูููุงุฑุจุชุงู ูุชุงุฆุฌ ููุงุซูุฉ. ูุงุญุธ ุฃู ุงูุชูุจุค ุจุงูุญุฏูุฏ ูุทููุจ ูุฅููุงููุฉ ุงูุชุฏุฑูุจุ ุญูุซ ูุชู ุญุณุงุจ ุงููุทุงุจูุฉ ุงูููุบุงุฑูุฉ ุจุงุณุชุฎุฏุงู ุงููุณุงูุงุช ุจูู ุงูุญุฏูุฏ.

## ูุตุงุฆุญ ุงูุงุณุชุฎุฏุงู

- ูุณุชุฎุฏู ูููุฐุฌ DETR ูุง ูุณูู ุจู **ุงุณุชุนูุงูุงุช ุงููุงุฆู** ูููุดู ุนู ุงูุฃุดูุงุก ูู ุตูุฑุฉ. ูุญุฏุฏ ุนุฏุฏ ุงูุงุณุชุนูุงูุงุช ุงูุนุฏุฏ ุงูุฃูุตู ููุฃุดูุงุก ุงูุชู ูููู ุงูุชุดุงููุง ูู ุตูุฑุฉ ูุงุญุฏุฉุ ููู ูุถุจูุท ุนูู 100 ุจุดูู ุงูุชุฑุงุถู (ุฑุงุฌุน ูุนููุฉ `num_queries` ูู [`~transformers.DetrConfig`]). ูุงุญุธ ุฃูู ูู ุงูุฌูุฏ ุฃู ูููู ููุงู ุจุนุถ ุงููุฑููุฉ (ูู COCOุ ุงุณุชุฎุฏู ุงููุคูููู 100ุ ูู ุญูู ุฃู ุงูุนุฏุฏ ุงูุฃูุตู ููุฃุดูุงุก ูู ุตูุฑุฉ COCO ูู ~70).

- ูููู ูู ุชุดููุฑ ูููุฐุฌ DETR ุจุชุญุฏูุซ ุชุฑููุฒุงุช ุงูุงุณุชุนูุงู ุจุงูุชูุงุฒู. ูุฐุง ูุฎุชูู ุนู ููุงุฐุฌ ุงููุบุฉ ูุซู GPT-2ุ ูุงูุชู ุชุณุชุฎุฏู ูู ุชุดููุฑ ุฐุงุชู ุงูุฑุฌูุน ุจุฏูุงู ูู ุฐูู. ูุจุงูุชุงููุ ูุง ูุชู ุงุณุชุฎุฏุงู ููุงุน ุงูุชูุงู ุณุจุจู.

- ูุถูู ูููุฐุฌ DETR ุชุฑููุฒุงุช ุงูููุถุน ุฅูู ุงูุญุงูุงุช ุงููุฎููุฉ ูู ูู ุทุจูุฉ ุงูุชูุงู ุฐุงุชู ูุงูุชูุงู ูุชุนุฏุฏ ูุจู ุฅุณูุงุทูุง ุฅูู ุงุณุชุนูุงูุงุช ูููุงุชูุญ. ุจุงููุณุจุฉ ูุชุฑููุฒุงุช ููุถุน ุงูุตูุฑุฉุ ูููู ูููุฑุก ุฃู ูุฎุชุงุฑ ุจูู ุชุฑููุฒุงุช ููุถุน ุซุงุจุชุฉ ุฃู ุชุนูููุฉ. ุจุดูู ุงูุชุฑุงุถูุ ูุชู ุถุจุท ูุนููุฉ `position_embedding_type` ูู [`~transformers.DetrConfig`] ุนูู `"sine"`.

- ุฃุซูุงุก ุงูุชุฏุฑูุจุ ูุฌุฏ ูุคููู ูููุฐุฌ DETR ุฃูู ูู ุงููููุฏ ุงุณุชุฎุฏุงู ุฎุณุงุฆุฑ ูุณุงุนุฏุฉ ูู ูู ุงูุชุดููุฑุ ุฎุงุตุฉ ููุณุงุนุฏุฉ ุงููููุฐุฌ ุนูู ุฅุฎุฑุงุฌ ุงูุนุฏุฏ ุงูุตุญูุญ ูู ุงูุฃุดูุงุก ููู ูุฆุฉ. ุฅุฐุง ููุช ุจุชุนููู ูุนููุฉ `auxiliary_loss` ูู [`~transformers.DetrConfig`] ุฅูู `True`ุ ูุณูุชู ุฅุถุงูุฉ ุดุจูุงุช ุนุตุจูุฉ ุฃูุงููุฉ ูุฎุณุงุฆุฑ ููุบุงุฑูุฉ ุจุนุฏ ูู ุทุจูุฉ ูู ุชุดููุฑ (ูุน ูุดุงุฑูุฉ FFNs ูููุนููุงุช).

- ุฅุฐุง ููุช ุชุฑูุฏ ุชุฏุฑูุจ ุงููููุฐุฌ ูู ุจูุฆุฉ ููุฒุนุฉ ุนุจุฑ ุนุฏุฉ ุนูุฏุ ููุฌุจ ุนููู ุชุญุฏูุซ ูุชุบูุฑ _num_boxes_ ูู ูุฆุฉ _DetrLoss_ ูู _modeling_detr.py_. ุนูุฏ ุงูุชุฏุฑูุจ ุนูู ุนุฏุฉ ุนูุฏุ ูุฌุจ ุชุนููู ูุฐุง ุฅูู ูุชูุณุท ุนุฏุฏ ุงูุตูุงุฏูู ุงููุณุชูุฏูุฉ ุนุจุฑ ุฌููุน ุงูุนูุฏุ ููุง ูู ููุถุญ ูู ุงูุชูููุฐ ุงูุฃุตูู [ููุง](https://github.com/facebookresearch/detr/blob/a54b77800eb8e64e3ad0d8237789fcbf2f8350c5/models/detr.py#L227-L232).

- ูููู ุชููุฆุฉ [`~transformers.DetrForObjectDetection`] ู [`~transformers.DetrForSegmentation`] ุจุฃู ุดุจูุฉ ุนุตุจูุฉ ุชุนุงูุจูุฉ ูุชููุฑุฉ ูู [ููุชุจุฉ timm](https://github.com/rwightman/pytorch-image-models). ูููู ุชููุฆุฉ ูููุฐุฌ ูุน ุดุจูุฉ ุนุตุจูุฉ ุชุนุงูุจูุฉ MobileNet ุนูู ุณุจูู ุงููุซุงู ุนู ุทุฑูู ุชุนููู ุณูุฉ `backbone` ูู [`~transformers.DetrConfig`] ุฅูู `"tf_mobilenetv3_small_075"`ุ ุซู ุชููุฆุฉ ุงููููุฐุฌ ุจุงุณุชุฎุฏุงู ูุฐุง ุงูุชูููู.

- ูููู ูููุฐุฌ DETR ุจุชุบููุฑ ุญุฌู ุงูุตูุฑ ุงููุฏุฎูุฉ ุจุญูุซ ูููู ุงูุฌุงูุจ ุงูุฃูุตุฑ ุนูู ุงูุฃูู ุนุฏุฏูุง ูุนูููุง ูู ุงูุจูุณูุงุช ูู ุญูู ุฃู ุงูุฃุทูู ูู 1333 ุจูุณู ูุญุฏ ุฃูุตู. ุฃุซูุงุก ุงูุชุฏุฑูุจุ ูุชู ุงุณุชุฎุฏุงู ุฒูุงุฏุฉ ุญุฌู ุงููููุงุณ ุจุญูุซ ูููู ุงูุฌุงูุจ ุงูุฃูุตุฑ ุนุดูุงุฆููุง ุนูู ุงูุฃูู 480 ุจูุณู ููุญุฏ ุฃูุตู 800 ุจูุณู. ุฃุซูุงุก ุงูุงุณุชุฏูุงูุ ูุชู ุชุนููู ุงูุฌุงูุจ ุงูุฃูุตุฑ ุฅูู 800. ูููู ุงุณุชุฎุฏุงู [`~transformers.DetrImageProcessor`] ูุฅุนุฏุงุฏ ุงูุตูุฑ (ูุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุงูุงุฎุชูุงุฑูุฉ ุจุชูุณูู COCO) ูููููุฐุฌ. ูุธุฑูุง ููุฐุง ุงูุชุบููุฑ ูู ุงูุญุฌูุ ูููู ุฃู ูููู ููุตูุฑ ูู ุฏูุนุฉ ุฃุญุฌุงู ูุฎุชููุฉ. ูุญู ูููุฐุฌ DETR ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ุฅุถุงูุฉ ุตูุฑ ุฅูู ุงูุญุฌู ุงูุฃูุจุฑ ูู ุฏูุนุฉุ ูุนู ุทุฑูู ุฅูุดุงุก ููุงุน ุจูุณู ูุดูุฑ ุฅูู ุงูุจูุณูุงุช ุงูุญููููุฉ/ุงููุณุงุฏุงุช. ุจุฏูุงู ูู ุฐููุ ูููู ูููุฑุก ุฃูุถูุง ุชุญุฏูุฏ ุฏุงูุฉ ุชุฌููุน ูุฎุตุตุฉ ูู ุฃุฌู ุชุฌููุน ุงูุตูุฑ ูุนูุงุ ุจุงุณุชุฎุฏุงู [`~transformers.DetrImageProcessor.pad_and_create_pixel_mask`].

- ุณูุญุฏุฏ ุญุฌู ุงูุตูุฑ ููุฏุงุฑ ุงูุฐุงูุฑุฉ ุงููุณุชุฎุฏูุฉุ ูุจุงูุชุงูู ุณูุญุฏุฏ `batch_size`. ูููุตุญ ุจุงุณุชุฎุฏุงู ุญุฌู ุฏูุนุฉ ูุจูุบ 2 ููู GPU. ุฑุงุฌุน [ุฎูุท GitHub](https://github.com/facebookresearch/detr/issues/150) ูุฐุง ููุฒูุฏ ูู ุงููุนูููุงุช.

ููุงู ุซูุงุซ ุทุฑู ูุชููุฆุฉ ูููุฐุฌ DETR (ุญุณุจ ุชูุถููู):

ุงูุฎูุงุฑ 1: ุชููุฆุฉ ูููุฐุฌ DETR ุจุฃูุฒุงู ููุนููุฉ ูุณุจููุง ูููููุฐุฌ ุจุงููุงูู

```py
>>> from transformers import DetrForObjectDetection

>>> model = DetrForObjectDetection.from_pretrained("facebook/detr-resnet-50")
```

ุงูุฎูุงุฑ 2: ุชููุฆุฉ ูููุฐุฌ DETR ุจุฃูุฒุงู ููุนููุฉ ูุณุจููุง ููุดุจูุฉ ุงูุนุตุจูุฉ ุงูุชุนุงูุจูุฉุ ูููู ุจุฃูุฒุงู ููุนููุฉ ูุณุจููุง ููุญูู ุงูุชุฑููุฒ ููู ุงูุชุฑููุฒ

```py
>>> from transformers import DetrConfig, DetrForObjectDetection

>>> config = DetrConfig()
>>> model = DetrForObjectDetection(config)
```

ุงูุฎูุงุฑ 3: ุชููุฆุฉ ูููุฐุฌ DETR ุจุฃูุฒุงู ููุนููุฉ ูุณุจููุง ููุดุจูุฉ ุงูุนุตุจูุฉ ุงูุชุนุงูุจูุฉ + ูุญูู ุงูุชุฑููุฒ ููู ุงูุชุฑููุฒ

```py
>>> config = DetrConfig(use_pretrained_backbone=False)
>>> model = DetrForObjectDetection(config)
```

ูููุฎุตุ ุถุน ูู ุงุนุชุจุงุฑู ุงูุฌุฏูู ุงูุชุงูู:

| ุงููููุฉ | ุงููุดู ุนู ุงูุฃุดูุงุก | ุชุฌุฒุฆุฉ ุงููุซูู | ุงูุชุฌุฒุฆุฉ ุงูุดุงููุฉ |
|------|------------------|-----------------------|-----------------------|
| **ุงููุตู** | ุงูุชูุจุค ุจุญุฏูุฏ ุงูุฅุญุฏุงุซูุงุช ูุชุตูููุงุช ุงููุฆุงุช ุญูู ุงูุฃุดูุงุก ูู ุตูุฑุฉ | ุงูุชูุจุค ุจุฃููุนุฉ ุญูู ุงูุฃุดูุงุก (ุฃู ุงููุซููุงุช) ูู ุตูุฑุฉ | ุงูุชูุจุค ุจุฃููุนุฉ ุญูู ูู ูู ุงูุฃุดูุงุก (ุฃู ุงููุซููุงุช) ููุฐูู "ุงูุฃุดูุงุก" (ุฃู ุฃุดูุงุก ุงูุฎูููุฉ ูุซู ุงูุฃุดุฌุงุฑ ูุงูุทุฑู) ูู ุตูุฑุฉ |
| **ุงููููุฐุฌ** | [`~transformers.DetrForObjectDetection`] | [`~transformers.DetrForSegmentation`] | [`~transformers.DetrForSegmentation`] |
| **ูุฌููุนุฉ ุงูุจูุงูุงุช ุงููููุฐุฌูุฉ** | COCO detection | COCO detectionุ COCO panoptic | COCO panoptic |
| **ุชูุณูู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูุชูููุฑูุง ุฅูู** [`~transformers.DetrImageProcessor`] | {'image_id': `int`ุ 'annotations': `List [Dict]`} ูู Dict ุนุจุงุฑุฉ ุนู ุชุนููู ุชูุถูุญู ููุงุฆู COCO | {'image_id': `int`ุ 'annotations': `List [Dict]`} (ูู ุญุงูุฉ ุงููุดู ุนู COCO) ุฃู {'file_name': `str`ุ 'image_id': `int`ุ 'segments_info': `List [Dict]`} (ูู ุญุงูุฉ COCO panoptic) | {'file_name': `str`ุ 'image_id': `int`ุ 'segments_info': `List [Dict]`} ู masks_path (ูุณุงุฑ ุฅูู ุงูุฏููู ุงูุฐู ูุญุชูู ุนูู ูููุงุช PNG ููุฃููุนุฉ) |
| **ูุง ุจุนุฏ ุงููุนุงูุฌุฉ** (ุฃู ุชุญููู ุฅุฎุฑุงุฌ ุงููููุฐุฌ ุฅูู ุชูุณูู Pascal VOC) | [`~transformers.DetrImageProcessor.post_process`] | [`~transformers.DetrImageProcessor.post_process_segmentation`] | [`~transformers.DetrImageProcessor.post_process_segmentation`]`ุ [`~transformers.DetrImageProcessor.post_process_panoptic`] |
| **ุงููููููู** | `CocoEvaluator` ูุน `iou_types="bbox"` | `CocoEvaluator` ูุน `iou_types="bbox"` ุฃู `"segm"` | `CocoEvaluator` ูุน `iou_tupes="bbox"` ุฃู `"segm"`ุ `PanopticEvaluator` |

ุจุงุฎุชุตุงุฑุ ูุฌุจ ุฅุนุฏุงุฏ ุงูุจูุงูุงุช ุจุชูุณูู COCO detection ุฃู COCO panopticุ ุซู ุงุณุชุฎุฏุงู [`~transformers.DetrImageProcessor`] ูุฅูุดุงุก `pixel_values`ุ `pixel_mask`ุ ูุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุงูุงุฎุชูุงุฑูุฉ `labels`ุ ูุงูุชู ูููู ุจุนุฏ ุฐูู ุงุณุชุฎุฏุงููุง ูุชุฏุฑูุจ (ุฃู ุถุจุท ุฏููู) ูููุฐุฌ. ููุชููููุ ูุฌุจ ุฃููุงู ุชุญููู ูุฎุฑุฌุงุช ุงููููุฐุฌ ุจุงุณุชุฎุฏุงู ุฅุญุฏู ุทุฑู ูุง ุจุนุฏ ุงููุนุงูุฌุฉ ูู [`~transformers.DetrImageProcessor`]. ูููู ุจุนุฏ ุฐูู ุชูููุฑ ูุฐู ุงููุฎุฑุฌุงุช ุฅูู `CocoEvaluator` ุฃู `PanopticEvaluator`ุ ูุงูุชู ุชุชูุญ ูู ุญุณุงุจ ููุงููุณ ูุซู ูุชูุณุท ุงูุฏูุฉ (mAP) ูุงูุฌูุฏุฉ ุงูุดุงููุฉ (PQ). ูุชู ุชูููุฐ ูุฐู ุงููุงุฆูุงุช ูู [ุงููุณุชูุฏุน ุงูุฃุตูู](https://github.com/facebookresearch/detr). ุฑุงุฌุน [ุฏูุงุชุฑ ุงูููุงุญุธุงุช ุงูุชูุถูุญูุฉ](https://github.com/NielsRogge/Transformers-Tutorials/tree/master/DETR) ููุญุตูู ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงูุชูููู.
## ุงูููุงุฑุฏ

ูุงุฆูุฉ ุจููุงุฑุฏ Hugging Face ุงูุฑุณููุฉ ูููุงุฑุฏ ุงููุฌุชูุน (ูุดุงุฑ ุฅูููุง ุจุฑูุฒ ๐) ููุณุงุนุฏุชู ูู ุงูุจุฏุก ูุน DETR.
<PipelineTag pipeline="object-detection"/>

- ูููู ุงูุนุซูุฑ ุนูู ุฌููุน ุฏูุงุชุฑ ุงูููุงุญุธุงุช ุงูุชูุถูุญูุฉ ูููุซุงู ุงูุชู ุชูุถุญ ุงูุถุจุท ุงูุฏููู ูู [`DetrForObjectDetection`] ู [`DetrForSegmentation`] ุนูู ูุฌููุนุฉ ุจูุงูุงุช ูุฎุตุตุฉ [ููุง](https://github.com/NielsRogge/Transformers-Tutorials/tree/master/DETR).

- ูููู ุงูุนุซูุฑ ุนูู ุงูุจุฑุงูุฌ ุงููุตูุฉ ููุถุจุท ุงูุฏููู ูู [`DetrForObjectDetection`] ุจุงุณุชุฎุฏุงู [`Trainer`] ุฃู [Accelerate](https://huggingface.co/docs/accelerate/index) [ููุง](https://github.com/huggingface/transformers/tree/main/examples/pytorch/object-detection).

- ุฑุงุฌุน ุฃูุถูุง: [ุฏููู ููุงู ุงููุดู ุนู ุงูุฃุดูุงุก](../tasks/object_detection).

ุฅุฐุง ููุช ููุชููุง ุจุชูุฏูู ููุฑุฏ ูุฅุฏุฑุงุฌู ููุงุ ููุฑุฌู ูุชุญ ุทูุจ ุณุญุจ ูุณูููู ุจูุฑุงุฌุนุชู! ูููุถู ุฃู ูุธูุฑ ุงูููุฑุฏ ุดูุฆูุง ุฌุฏูุฏูุง ุจุฏูุงู ูู ุชูุฑุงุฑ ููุฑุฏ ููุฌูุฏ.

## DetrConfig

[[autodoc]] DetrConfig

## DetrImageProcessor

[[autodoc]] DetrImageProcessor

- preprocess

- post_process_object_detection

- post_process_semantic_segmentation

- post_process_instance_segmentation

- post_process_panoptic_segmentation

## DetrFeatureExtractor

[[autodoc]] DetrFeatureExtractor

- __call__

- post_process_object_detection

- post_process_semantic_segmentation

- post_process_instance_segmentation

- post_process_panoptic_segmentation

## ุงููุฎุฑุฌุงุช ุงูุฎุงุตุฉ ุจู DETR

[[autodoc]] models.detr.modeling_detr.DetrModelOutput

[[autodoc]] models.detr.modeling_detr.DetrObjectDetectionOutput

[[autodoc]] models.detr.modeling_detr.DetrSegmentationOutput

## DetrModel

[[autodoc]] DetrModel

- forward

## DetrForObjectDetection

[[autodoc]] DetrForObjectDetection

- forward

## DetrForSegmentation

[[autodoc]] DetrForSegmentation

- forward