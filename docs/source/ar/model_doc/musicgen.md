# MusicGen

## ูุธุฑุฉ ุนุงูุฉ

ุงูุชูุฑุญ ูููุฐุฌ MusicGen ูู ุงููุฑูุฉ ุงูุจุญุซูุฉ [Simple and Controllable Music Generation](https://arxiv.org/abs/2306.05284) ูู ูุจู Jade Copet, Felix Kreuk, Itai Gat, Tal Remez, David Kant, Gabriel Synnaeve, Yossi Adi ู Alexandre Dรฉfossez.

MusicGen ูู ูููุฐุฌ ุชุญููู ุฃุญุงุฏู ุงููุฑุญูุฉ ุฐุงุชู ุงูุฑุฌุนูุฉ ูุงุฏุฑ ุนูู ุชูููุฏ ุนููุงุช ููุณูููุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ูุดุฑูุทุฉ ุจูุตู ูุตู ุฃู ููู ุตูุชู. ูุชู ุชูุฑูุฑ ุงูุฃูุตุงู ุงููุตูุฉ ุนุจุฑ ูููุฐุฌ ูุดูุฑ ูุต ูุฌูุฏ ููุญุตูู ุนูู ุชุณูุณู ูู ุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ. ุซู ูุชู ุชุฏุฑูุจ MusicGen ููุชูุจุค ุจุฑููุฒ ุตูุชูุฉ ูููุตูุฉุ ุฃู "ุฑููุฒ ุตูุชูุฉ"ุ ูุดุฑูุทุฉ ุจูุฐู ุงูุญุงูุงุช ุงููุฎููุฉ. ุจุนุฏ ุฐููุ ูุชู ูู ุชุดููุฑ ูุฐู ุงูุฑููุฒ ุงูุตูุชูุฉ ุจุงุณุชุฎุฏุงู ูููุฐุฌ ุถุบุท ุตูุชูุ ูุซู EnCodecุ ูุงุณุชุนุงุฏุฉ ุงูููุฌุฉ ุงูุตูุชูุฉ.

ูู ุฎูุงู ููุท ุชุดุงุจู ุงูุฑููุฒ ุจููุงุกุฉุ ูุง ูุชุทูุจ MusicGen ุชูุซูููุง ุฏูุงูููุง ุฐุงุชู ุงูุฅุดุฑุงู ูููุตูุต/ุงููููุงุช ุงูุตูุชูุฉุ ููุง ูุคุฏู ุฅูู ุงููุถุงุก ุนูู ุงูุญุงุฌุฉ ุฅูู ุชุนุดูู ุนุฏุฉ ููุงุฐุฌ ููุชูุจุค ุจูุฌููุนุฉ ูู ูุชุจ ุงูุฑููุฒ (ุนูู ุณุจูู ุงููุซุงูุ ุจุดูู ูุฑูู ุฃู ุนู ุทุฑูู ุชูุจูุฑ ุงูุญุฌู). ุจุฏูุงู ูู ุฐููุ ููู ูุงุฏุฑ ุนูู ุชูููุฏ ุฌููุน ูุชุจ ุงูุฑููุฒ ูู ุนูููุฉ ุชูุฑุงุฑ ูุงุญุฏุฉ.

ุงูููุฎุต ูู ุงููุฑูุฉ ูู ููุง ููู:

*ูุญู ูุชูุงูู ูููุฉ ุชูููุฏ ุงูููุณููู ุงูุดุฑุทูุฉ. ููุฏู MusicGenุ ููู ูููุฐุฌ ูุบุฉ ูุงุญุฏ ูุนูู ุนูู ุนุฏุฉ ุชูุงุฑุงุช ูู ุงูุชูุซูู ุงูููุณููู ุงููููุตู ุงููุถุบูุทุ ุฃู ุงูุฑููุฒ. ุนูู ุนูุณ ุงูุฃุนูุงู ุงูุณุงุจูุฉุ ูุชููู MusicGen ูู ูููุฐุฌ ูุบุฉ ูุญูู ุฃุญุงุฏู ุงููุฑุญูุฉ ุฌูุจูุง ุฅูู ุฌูุจ ูุน ุฃููุงุท ุชุดุงุจู ุงูุฑููุฒ ุงููุนุงูุฉุ ูุงูุชู ุชูุถู ุนูู ุงูุญุงุฌุฉ ุฅูู ุชุนุดูู ุนุฏุฉ ููุงุฐุฌุ ุนูู ุณุจูู ุงููุซุงูุ ุจุดูู ูุฑูู ุฃู ุนู ุทุฑูู ุชูุจูุฑ ุงูุญุฌู. ููููุง ููุฐุง ุงูููุฌุ ููุถุญ ููู ูููู ูู MusicGen ุชูููุฏ ุนููุงุช ุนุงููุฉ ุงูุฌูุฏุฉุ ูุน ุงูุดุฑุทูุฉ ุนูู ุงููุตู ุงููุตู ุฃู ุงูููุฒุงุช ุงููุญููุฉุ ููุง ูุณูุญ ุจูุฒูุฏ ูู ุงูุชุญูู ูู ุงูุฅุฎุฑุงุฌ ุงููููุฏ. ูุฌุฑู ุชูููููุง ุชุฌุฑูุจููุง ูุงุณุน ุงููุทุงูุ ูุน ูุฑุงุนุงุฉ ุงูุฏุฑุงุณุงุช ุงูุชููุงุฆูุฉ ูุงูุจุดุฑูุฉ ุนูู ุญุฏ ุณูุงุกุ ููุง ููุธูุฑ ุฃู ุงูููุฌ ุงูููุชุฑุญ ูุชููู ุนูู ุฎุทูุท ุงูุฃุณุงุณ ุงูููููุฉ ุนูู ูุนูุงุฑ ููุงุณู ูููุต ุฅูู ุงูููุณููู. ูู ุฎูุงู ุฏุฑุงุณุงุช ุงูุชุญููู ุงูุชูููุ ูุณูุท ุงูุถูุก ุนูู ุฃูููุฉ ูู ูููู ูู ุงูููููุงุช ุงูุชู ูุชููู ูููุง MusicGen.*

ุชูุช ุงููุณุงููุฉ ุจูุฐุง ุงููููุฐุฌ ูู ูุจู [sanchit-gandhi](https://huggingface.co/sanchit-gandhi). ูููู ุงูุนุซูุฑ ุนูู ุงูููุฏ ุงูุฃุตูู [ููุง](https://github.com/facebookresearch/audiocraft). ูููู ุงูุนุซูุฑ ุนูู ููุงุท ุงูุชุญูู ุงููุณุจูุฉ ุนูู [Hugging Face Hub](https://huggingface.co/models?sort=downloads&search=facebook%2Fmusicgen-).

## ูุตุงุฆุญ ุงูุงุณุชุฎุฏุงู

- ุจุนุฏ ุชูุฒูู ููุงุท ุงูุชุญูู ุงูุฃุตููุฉ ูู [ููุง](https://github.com/facebookresearch/audiocraft/blob/main/docs/MUSICGEN.md#importing--exporting-models)ุ ููููู ุชุญููููุง ุจุงุณุชุฎุฏุงู **ุณูุฑูุจุช ุงูุชุญููู** ุงููุชุงุญ ูู `src/transformers/models/musicgen/convert_musicgen_transformers.py` ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ ุงูุชุงูู:

```bash
python src/transformers/models/musicgen/convert_musicgen_transformers.py \
--checkpoint small --pytorch_dump_folder /output/path --safe_serialization
```

## ุงูุชูููุฏ

MusicGen ูุชูุงูู ูุน ูุถุนู ุงูุชูููุฏ: ุงูุฌุดุน ูุงูุนููุงุช. ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉุ ูุคุฏู ุฃุฎุฐ ุงูุนููุงุช ุฅูู ูุชุงุฆุฌ ุฃูุถู ุจูุซูุฑ ูู ุงูุฌุดุนุ ูุฐูู ูุดุฌุน ุนูู ุงุณุชุฎุฏุงู ูุถุน ุงูุนููุงุช ุญูุซูุง ุฃููู. ูุชู ุชูููู ุงูุนููุงุช ุจุดูู ุงูุชุฑุงุถูุ ููููู ุชุญุฏูุฏูุง ุจุดูู ุตุฑูุญ ุนู ุทุฑูู ุชุนููู `do_sample=True` ูู ุงูููุงููุฉ ุฅูู [`MusicgenForConditionalGeneration.generate`], ุฃู ุนู ุทุฑูู ุชุฌุงูุฒ ุชูููู ุงูุชูููุฏ ูููููุฐุฌ (ุงูุธุฑ ุฃุฏูุงู).

ููุชุตุฑ ุงูุชูููุฏ ุจูุงุณุทุฉ ุงูุชุฑููุฒ ุงูููุถุนู ุงูุฌูุจู ุนูู ูุฏุฎูุงุช 30 ุซุงููุฉ. ููุฐุง ูุนูู ุฃู MusicGen ูุง ููููู ุชูููุฏ ุฃูุซุฑ ูู 30 ุซุงููุฉ ูู ุงูุตูุช (1503 ุฑููุฒ)ุ ูุชุณุงูู ููุฒุฉ ุงูุชูููุฏ ุงูุตูุชู ุงููุฏููุนุฉ ุจุงูุตูุช ูู ูุฐุง ุงูุญุฏ ูุฐุงุ ูุธุฑูุง ููุฏุฎู ุตูุชู ูุฏุชู 20 ุซุงููุฉุ ูุง ูููู ูู MusicGen ุชูููุฏ ุฃูุซุฑ ูู 10 ุซูุงูู ุฅุถุงููุฉ ูู ุงูุตูุช.

ุชุฏุนู Transformers ููุง ุงูุฅุตุฏุงุฑุงุช ุงูุฃุญุงุฏูุฉ (ููุงุฉ ูุงุญุฏุฉ) ูุงูุณุชูุฑูู (ููุงุชุงู) ูู MusicGen. ุชููู ุฅุตุฏุงุฑุงุช ุงูููุงุฉ ุงููุฑุฏูุฉ ุจุชูููุฏ ูุฌููุนุฉ ูุงุญุฏุฉ ูู ูุชุจ ุงูุฑููุฒ. ุชููู ุงูุฅุตุฏุงุฑุงุช ุงูุณุชูุฑูู ุจุชูููุฏ ูุฌููุนุชูู ูู ูุชุจ ุงูุฑููุฒุ ูุงุญุฏุฉ ููู ููุงุฉ (ูุณุงุฑ/ูููู)ุ ููุชู ูู ุชุดููุฑ ูู ูุฌููุนุฉ ูู ูุชุจ ุงูุฑููุฒ ุจุดูู ูุณุชูู ูู ุฎูุงู ูููุฐุฌ ุถุบุท ุงูุตูุช. ูุชู ุฏูุฌ ุชูุงุฑุงุช ุงูุตูุช ููู ููุงุฉ ูุฅุนุทุงุก ุงูุฅุฎุฑุงุฌ ุงูุณุชูุฑูู ุงูููุงุฆู.

### ุงูุชูููุฏ ุบูุฑ ุงููุดุฑูุท

ูููู ุงูุญุตูู ุนูู ุงููุฏุฎูุงุช ููุชูููุฏ ุบูุฑ ุงููุดุฑูุท (ุฃู 'null') ูู ุฎูุงู ุทุฑููุฉ [`MusicgenForConditionalGeneration.get_unconditional_inputs`]:

```python
>>> from transformers import MusicgenForConditionalGeneration

>>> model = MusicgenForConditionalGeneration.from_pretrained("facebook/musicgen-small")
>>> unconditional_inputs = model.get_unconditional_inputs(num_samples=1)

>>> audio_values = model.generate(**unconditional_inputs, do_sample=True, max_new_tokens=256)
```

ุงูุฅุฎุฑุงุฌ ุงูุตูุชู ุนุจุงุฑุฉ ุนู ูุตูููุฉ Torch ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุฐุงุช ุดูู `(batch_sizeุ num_channelsุ sequence_length)`. ููุงุณุชูุงุน ุฅูู ุนููุงุช ุงูุตูุช ุงููููุฏุฉุ ููููู ุชุดุบูููุง ูู ุฏูุชุฑ ููุงุญุธุงุช ipynb:

```python
from IPython.display import Audio

sampling_rate = model.config.audio_encoder.sampling_rate
Audio(audio_values[0].numpy(), rate=sampling_rate)
```

ุฃู ุญูุธูุง ูููู `.wav` ุจุงุณุชุฎุฏุงู ููุชุจุฉ ุชุงุจุนุฉ ูุฌูุฉ ุฎุงุฑุฌูุฉุ ุนูู ุณุจูู ุงููุซุงู `scipy`:

```python
>>> import scipy

>>> sampling_rate = model.config.audio_encoder.sampling_rate
>>> scipy.io.wavfile.write("musicgen_out.wav", rate=sampling_rate, data=audio_values[0, 0].numpy())
```

### ุงูุชูููุฏ ุงููุตู ุงููุดุฑูุท

ูููู ูููููุฐุฌ ุชูููุฏ ุนููุฉ ุตูุชูุฉ ูุดุฑูุทุฉ ุจููู ูุตู ูู ุฎูุงู ุงุณุชุฎุฏุงู [`MusicgenProcessor`] ููุนุงูุฌุฉ ุงููุฏุฎูุงุช:

```python
>>> from transformers import AutoProcessor, MusicgenForConditionalGeneration

>>> processor = AutoProcessor.from_pretrained("facebook/musicgen-small")
>>> model = MusicgenForConditionalGeneration.from_pretrained("facebook/musicgen-small")

>>> inputs = processor(
...     text=["80s pop track with bassy drums and synth", "90s rock song with loud guitars and heavy drums"],
...     padding=True,
...     return_tensors="pt",
... )
>>> audio_values = model.generate(**inputs, do_sample=True, guidance_scale=3, max_new_tokens=256)
```

ูุชู ุงุณุชุฎุฏุงู `guidance_scale` ูู ุงูุชูุฌูู ุงููุฌุงูู ููุชุตููู (CFG)ุ ุญูุซ ูุญุฏุฏ ูุฒู ุงูููุบุงุฑูุชูุงุช ุงูุดุฑุทูุฉ (ุงูุชู ูุชู ุงูุชูุจุค ุจูุง ูู ููุฌูุงุช ุงููุต) ูุงูููุบุงุฑูุชูุงุช ุบูุฑ ุงููุดุฑูุทุฉ (ุงูุชู ูุชู ุงูุชูุจุค ุจูุง ูู ููุฌู ุฃู 'null'). ูุคุฏู ุงุฑุชูุงุน ูููุงุณ ุงูุชูุฌูู ุฅูู ุชุดุฌูุน ุงููููุฐุฌ ุนูู ุชูููุฏ ุนููุงุช ูุฑุชุจุทุฉ ุงุฑุชุจุงุทูุง ูุซูููุง ุจููู ุงูุฅุฏุฎุงู ุงููุทุฑูุญุ ุนุงุฏุฉู ุนูู ุญุณุงุจ ุฌูุฏุฉ ุงูุตูุช ุงูุฑุฏูุฆุฉ. ูุชู ุชูููู CFG ุนู ุทุฑูู ุชุนููู `guidance_scale > 1`. ููุญุตูู ุนูู ุฃูุถู ุงููุชุงุฆุฌุ ุงุณุชุฎุฏู `guidance_scale=3` (ุงูุชุฑุงุถู).

### ุงูุชูููุฏ ุงููุฏููุน ุจุงูุตูุช

ูููู ุงุณุชุฎุฏุงู ููุณ [`MusicgenProcessor`] ููุนุงูุฌุฉ ููู ุตูุชู ูุณุชุฎุฏู ูููู ุตูุชู ููุงุณุชูุฑุงุฑ. ูู ุงููุซุงู ุงูุชุงููุ ูููู ุจุชุญููู ููู ุตูุชู ุจุงุณุชุฎุฏุงู ููุชุจุฉ ูุฌููุนุงุช ุงูุจูุงูุงุช ๐คุ ูุงูุชู ูููู ุชุซุจูุชูุง ุนุจุฑ ุงูุฃูุฑ ุฃุฏูุงู:

```bash
pip install --upgrade pip
pip install datasets[audio]
```

```python
>>> from transformers import AutoProcessor, MusicgenForConditionalGeneration
>>> from datasets import load_dataset

>>> processor = AutoProcessor.from_pretrained("facebook/musicgen-small")
>>> model = MusicgenForConditionalGeneration.from_pretrained("facebook/musicgen-small")

>>> dataset = load_dataset("sanchit-gandhi/gtzan", split="train", streaming=True)
>>> sample = next(iter(dataset))["audio"]

>>> # take the first half of the audio sample
>>> sample["array"] = sample["array"][: len(sample["array"]) // 2]

>>> inputs = processor(
...     audio=sample["array"],
...     sampling_rate=sample["sampling_rate"],
...     text=["80s blues track with groovy saxophone"],
...     padding=True,
...     return_tensors="pt",
... )
>>> audio_values = model.generate(**inputs, do_sample=True, guidance_scale=3, max_new_tokens=256)
```

ุจุงููุณุจุฉ ููุชูููุฏ ุงูุตูุชู ุงููุฏููุน ุจุงูุตูุชุ ูููู ูุนุงูุฌุฉ ุงูููู ุงูุตูุชูุฉ ุงููููุฏุฉ ูุฅุฒุงูุฉ ุงูุญุดู ุจุงุณุชุฎุฏุงู ูุฆุฉ [`MusicgenProcessor`]:

```python
>>> from transformers import AutoProcessor, MusicgenForConditionalGeneration
>>> from datasets import load_dataset

>>> processor = AutoProcessor.from_pretrained("facebook/musicgen-small")
>>> model = MusicgenForConditionalGeneration.from_pretrained("facebook/musicgen-small")

>>> dataset = load_dataset("sanchit-gandhi/gtzan", split="train", streaming=True)
>>> sample = next(iter(dataset))["audio"]

>>> # take the first quarter of the audio sample
>>> sample_1 = sample["array"][: len(sample["array"]) // 4]

>>> # take the first half of the audio sample
>>> sample_2 = sample["array"][: len(sample["array"]) // 2]

>>> inputs = processor(
...     audio=[sample_1, sample_2],
...     sampling_rate=sample["sampling_rate"],
...     text=["80s blues track with groovy saxophone", "90s rock song with loud guitars and heavy drums"],
...     padding=True,
...     return_tensors="pt",
... )
>>> audio_values = model.generate(**inputs, do_sample=True, guidance_scale=3, max_new_tokens=256)

>>> # post-process to remove padding from the batched audio
>>> audio_values = processor.batch_decode(audio_values, padding_mask=inputs.padding_mask)
```

### ุชูููู ุงูุชูููุฏ

ูููู ุงูุนุซูุฑ ุนูู ุงููุนููุงุช ุงูุงูุชุฑุงุถูุฉ ุงูุชู ุชุชุญูู ูู ุนูููุฉ ุงูุชูููุฏุ ูุซู ุงูุนููุงุช ููููุงุณ ุงูุชูุฌูู ูุนุฏุฏ ุงูุฑููุฒ ุงููููุฏุฉุ ูู ุชูููู ุงูุชูููุฏ ูููููุฐุฌุ ูุชุญุฏูุซูุง ุญุณุจ ุงูุฑุบุจุฉ:

```python
>>> from transformers import MusicgenForConditionalGeneration

>>> model = MusicgenForConditionalGeneration.from_pretrained("facebook/musicgen-small")

>>> # inspect the default generation config
>>> model.generation_config

>>> # increase the guidance scale to 4.0
>>> model.generation_config.guidance_scale = 4.0

>>> # decrease the max length to 256 tokens
>>> model.generation_config.max_length = 256
```

ูุงุญุธ ุฃู ุฃู ุญุฌุฌ ูุชู ุชูุฑูุฑูุง ุฅูู ุทุฑููุฉ ุงูุชูููุฏ ุณูู **ุชุญู ูุญู** ุชูู ุงูููุฌูุฏุฉ ูู ุชูููู ุงูุชูููุฏุ ูุฐุง ูุฅู ุชุนููู `do_sample=False` ูู ููุงููุฉ ุงูุชูููุฏ ุณูู ูุญู ูุญู ุฅุนุฏุงุฏ `model.generation_config.do_sample` ูู ุชูููู ุงูุชูููุฏ.

## ูููู ุงููููุฐุฌ

ูููู ุชูุณูู ูููุฐุฌ MusicGen ุฅูู ุซูุงุซ ูุฑุงุญู ูููุฒุฉ:

1. ูุดูุฑ ุงููุต: ูููู ุจุชุนููู ุฅุฏุฎุงูุงุช ุงููุต ุฅูู ุชุณูุณู ูู ุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ. ุชุณุชุฎุฏู ููุงุฐุฌ MusicGen ุงููุณุจูุฉ ุงูุชุฏุฑูุจ ูุดูุฑ ูุต ูุฌูุฏ ุฅูุง ูู T5 ุฃู Flan-T5
2. ูู ุชุดููุฑ MusicGen: ูููุฐุฌ ูุบุฉ (LM) ูููู ุจุชูููุฏ ุฑููุฒ ุตูุชูุฉ ุชููุงุฆููุง ูุดุฑูุทูุง ุจุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ ูููุดูุฑ
3. ูุดูุฑ/ูู ุชุดููุฑ ุงูุตูุช: ูุณุชุฎุฏู ูุชุดููุฑ ููู ุตูุชู ูุงุณุชุฎุฏุงูู ูุฑููุฒ ููุฌูุฉุ ูุงุณุชุนุงุฏุฉ ุงูููุฌุฉ ุงูุตูุชูุฉ ูู ุงูุฑููุฒ ุงูุตูุชูุฉ ุงูุชู ูุชูุจุฃ ุจูุง ูู ุงูุชุดููุฑ  
ูููุฐุงุ ูููู ุงุณุชุฎุฏุงู ูููุฐุฌ MusicGen ููููุฐุฌ ูู ุชุดููุฑ ูุณุชููุ ููู ูุง ููุงุจูู ูุฆุฉ [`MusicgenForCausalLM`], ุฃู ููููุฐุฌ ูุฑูุจ ูุชุถูู ูุดูุฑ ุงููุต ููุดูุฑ/ูู ุชุดููุฑ ุงูุตูุชุ ููู ูุง ููุงุจูู ูุฆุฉ [`MusicgenForConditionalGeneration`]. ุฅุฐุง ูุงูุช ููุงู ุญุงุฌุฉ ููุท ูุชุญููู ูู ุงูุชุดููุฑ ูู ููุทุฉ ุงูุชุญูู ุงููุณุจูุฉ ุงูุชุฏุฑูุจุ ููููู ุชุญูููู ุฃููุงู ุนู ุทุฑูู ุชุญุฏูุฏ ุงูุชูููู ุงูุตุญูุญุ ุฃู ูููู ุงููุตูู ุฅููู ูู ุฎูุงู ุงูุณูุฉ `.decoder` ูููููุฐุฌ ุงููุฑูุจ:

```python
>>> from transformers import AutoConfig, MusicgenForCausalLM, MusicgenForConditionalGeneration

>>> # Option 1: get decoder config and pass to `.from_pretrained`
>>> decoder_config = AutoConfig.from_pretrained("facebook/musicgen-small").decoder
>>> decoder = MusicgenForCausalLM.from_pretrained("facebook/musicgen-small", **decoder_config)

>>> # Option 2: load the entire composite model, but only return the decoder
>>> decoder = MusicgenForConditionalGeneration.from_pretrained("facebook/musicgen-small").decoder
```

ูุธุฑูุง ูุฃู ูุดูุฑ ุงููุต ููุดูุฑ/ูู ุชุดููุฑ ุงูุตูุช ูุฌูุฏุงู ุฃุซูุงุก ุงูุชุฏุฑูุจุ ูููู ุชุฏุฑูุจ ูู ุชุดููุฑ MusicGen [`MusicgenForCausalLM`] ุจุดูู ูุณุชูู ุนูู ูุฌููุนุฉ ุจูุงูุงุช ูู ุญุงูุงุช ุงููุดูุฑ ุงููุฎููุฉ ูุฑููุฒ ุงูุตูุช. ููุงุณุชุฏูุงูุ ูููู ุฏูุฌ ูู ุงูุชุดููุฑ ุงููุฏุฑุจ ูุน ูุดูุฑ ุงููุต ููุดูุฑ/ูู ุชุดููุฑ ุงูุตูุช ุงููุฌูุฏูู ูุงุณุชุฑุฏุงุฏ ูููุฐุฌ [`MusicgenForConditionalGeneration`] ุงููุฑูุจ.

ูุตุงุฆุญ:

* ุชู ุชุฏุฑูุจ MusicGen ุนูู ููุทุฉ ุงูุชุญูู 32 ูููู ูุฑุชุฒ ูู Encodec. ูุฌุจ ุงูุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ุฅุตุฏุงุฑ ูุชูุงูู ูู ูููุฐุฌ Encodec.
* ูููู ูุถุน ุงูุนููุงุช ุฅูู ุชูุฏูู ูุชุงุฆุฌ ุฃูุถู ูู ุงูุฌุดุน - ููููู ุงูุชุจุฏูู ุจูู ุงูุนููุงุช ุจุงุณุชุฎุฏุงู ุงููุชุบูุฑ `do_sample` ูู ุงูููุงููุฉ ุฅูู [`MusicgenForConditionalGeneration.generate`]

## MusicgenDecoderConfig

[[autodoc]] MusicgenDecoderConfig

## MusicgenConfig

[[autodoc]] MusicgenConfig

## MusicgenProcessor

[[autodoc]] MusicgenProcessor

## MusicgenModel

[[autodoc]] MusicgenModel

- forward

## MusicgenForCausalLM

[[autodoc]] MusicgenForCausalLM

- forward
## MusicgenForConditionalGeneration 

<!--
The MusicgenForConditionalGeneration module provides a simple interface for generating music using conditional generation. It allows users to specify conditions such as the style, mood, or length of the music they want to create, and then generates music that satisfies those conditions.
-->

ุชูุฏู ูุญุฏุฉ MusicgenForConditionalGeneration ูุงุฌูุฉ ุจุณูุทุฉ ูุฅูุดุงุก ุงูููุณููู ุจุงุณุชุฎุฏุงู ุงูุฅูุดุงุก ุงูุดุฑุทู. ุชุชูุญ ูููุณุชุฎุฏููู ุชุญุฏูุฏ ุดุฑูุท ูุซู ุงูุฃุณููุจ ุฃู ุงูุญุงูุฉ ุงููุฒุงุฌูุฉ ุฃู ุทูู ุงูููุณููู ุงูุชู ูุฑูุฏูู ุฅูุดุงุกูุงุ ุซู ุชููู ุจุฅูุดุงุก ููุณููู ุชูุจู ูุฐู ุงูุดุฑูุท.

```python
from musicgen import MusicgenForConditionalGeneration

# ุฅูุดุงุก ูุงุฆู MusicgenForConditionalGeneration
musicgen = MusicgenForConditionalGeneration()

# ุฅูุดุงุก ููุณููู ุดุฑุทูุฉ
conditions = {"style": "ููุงุณููู", "mood": "ุณุนูุฏ", "length": "ูุตูุฑ"}
music = musicgen.generate(**conditions)

# ุนุฑุถ ุงูููุณููู ุงููููุฏุฉ
music.show()
```

ูู ุงูููุฏ ุฃุนูุงูุ ูููู ุจุงุณุชูุฑุงุฏ ุงููุฆุฉ `MusicgenForConditionalGeneration` ูู ูุญุฏุฉ `musicgen`. ุจุนุฏ ุฐููุ ูููู ุจุฅูุดุงุก ูุงุฆู ูู ูุฐู ุงููุฆุฉ ูุณูู `musicgen`.

ูุญุฏุฏ ุงูุดุฑูุท ุงูุชู ูุฑูุฏ ุฃู ุชุชูุงูู ูุนูุง ุงูููุณููู ุงูุชู ุณูููู ุจุฅูุดุงุฆูุง. ูู ูุฐุง ุงููุซุงูุ ูุฑูุฏ ููุณููู ููุงุณูููุฉ ุณุนูุฏุฉ ููุตูุฑุฉ. ูููู ุจุชูุฑูุฑ ูุฐู ุงูุดุฑูุท ุนูู ุดูู ูุณุงุฆุท ูููุงุช ุฑุฆูุณูุฉ ุฅูู ุฏุงูุฉ `generate` ูููุงุฆู `musicgen`ุ ูุงูุชู ุชููู ุจุฅุฑุฌุงุน ูุงุฆู `Music` ุงูุฐู ููุซู ุงูููุณููู ุงููููุฏุฉ.

ุฃุฎูุฑูุงุ ูุณุชุฎุฏู ุฏุงูุฉ `show` ูุนุฑุถ ุงูููุณููู ุงููููุฏุฉ. ูููู ุฃูุถูุง ุญูุธ ุงูููุณููู ูููู ุฃู ุชุดุบูููุง ูุจุงุดุฑุฉู ุงุนุชูุงุฏูุง ุนูู ุงูููุชุจุงุช ุงูุตูุชูุฉ ุงููุซุจุชุฉ.

ุชุชูุญ ูุฆุฉ `MusicgenForConditionalGeneration` ุฅููุงูุงุช ูููุฉ ูุฅูุดุงุก ุงูููุณููู ุจูุงุกู ุนูู ุดุฑูุท ูุญุฏุฏุฉ. ูููู ูููุณุชุฎุฏููู ุชุฌุฑุจุฉ ุดุฑูุท ูุฎุชููุฉ ูุฏูุฌูุง ูุฅูุดุงุก ูุทุน ููุณูููุฉ ูุฑูุฏุฉ ููุซูุฑุฉ.